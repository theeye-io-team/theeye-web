# OUTDATED .

[![theeye.io](../../images/logo-theeye-theOeye-logo2.png)](https://theeye.io/en/index.html)

To compile the agent use the [Compiler Script](https://github.com/interactar/theeye-agent/blob/master/misc/compiler.sh)
To pack the agent use the [Packager Script](https://github.com/interactar/theeye-agent/blob/master/misc/packager.sh)

# Build TheEye Agent for Linux

## Prerequisites

* git
* npm 3 (at least)
* zeit/pkg (npm package globally installed)
* linux
* theeye agent installed and configured (I recommend to install and run the agent before continue)
* compilation tools (depends on the distro and kernel version)

## HOWTO (This doc probably is outdated. There are scripts to generate the binary & the package. This is to do it manually)

Check the last version of the compiler script in theeye-agent repo.

From theeye-agent's script root path , run the script

`./misc/compiler.sh`

The script will generate the binary agent into `bin` directory.
Then copy these node bindings for your platform. those files are generated by npm and placed within `node_modules` directory
at the moment You ran `npm install`.

There process will generate bindings to native addons

* binding.node
* ffi_bindings.node
* (check probably new bindings will be added)

You will usually found the files in the following path (but will depends on the module)

* ./ref/build/Release/binding.node
* ./ref/build/Release/obj.target/binding.node
* ./ffi/build/Release/ffi_bindings.node
* ./ffi/build/Release/obj.target/ffi_bindings.node


Finally copy the `config` directory within `bin`. The result should be similar as shown bellow:

```bash
@facugon dice (development): ls -la bin
total 29832
drwxrwxr-x 4 facugon facugon 4096 feb 10 09:14 .
drwxrwxr-x 12 facugon facugon 4096 feb 10 11:38 ..
-rwxrwxr-x 1 facugon facugon 43104 feb 10 09:13 binding.node
drwxrwxr-x 2 facugon facugon 4096 feb 10 11:40 config
drwxr-xr-x 2 facugon facugon 4096 feb 10 09:14 downloads
-rwxrwxr-x 1 facugon facugon 80952 feb 10 09:14 ffi_bindings.node
-rwxrwxr-- 1 facugon facugon 30401224 feb 10 09:09 theeye-agent
```

The `downloads` directory is automatically generated by the agent when the scripts are downloaded.
That should be enough. Enjoy!
