<!-- 


Modal for creating a customer 


-->
<div class="modal fade" id="create-customer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Create a customer</h4>
      </div>
      <div class="modal-body">
        <form id="createCustomerForm" action="/customer" class="form-horizontal">
          <div class="form-group">
            <label for="name" class="col-sm-2 control-label">Name</label>
            <div class="col-sm-10">
              <input data-hook="name" type="text" name="name" class="form-control" id="name" placeholder="Name">
            </div>
          </div>
          <div class="form-group">
            <label for="email" class="col-sm-2 control-label">Owner Email</label>
            <div class="col-sm-10">
              <input data-hook="email-create" id="email" name="email" class="form-control">
            </div>
          </div>
          <div class="form-group">
            <label for="emails" class="col-sm-2 control-label">Extra Emails</label>
            <div class="col-sm-10">
              <select data-hook="emails-create" id="emails" name="emails" multiple data-role="tagsinput"></select>
            </div>
          </div>
          <div class="form-group">
            <label for="description" class="col-sm-2 control-label">Description</label>
            <div class="col-sm-10">
              <textarea data-hook="description" name="description" class="form-control" id="description" placeholder="description"></textarea>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button id="customerAction" type="submit" class="btn btn-primary">Submit</button>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div><!--.modal-foooter-->
    </div><!--.modal-content-->
  </div><!--.modal-dialog-->
</div><!--.modal-->  

<script type="text/javascript">
  $('[data-hook=emails-create]').on('beforeItemAdd', function(event) {  
    var re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
    if(!re.test(event.item)) {
      event.cancel = true;
    }   
  });
</script>
